From: Tias Guns <tias@ulyssis.org>
Date: Sun, 18 Mar 2012 13:01:56 +0000
Subject: android: fix 'date'

patch from 'BusyBox Patch V1.0 (Vitaly Greck)'
https://code.google.com/p/busybox-android/downloads/detail?name=patch_busybox

diff --git a/coreutils/date.c b/coreutils/date.c
--- a/coreutils/date.c
+++ b/coreutils/date.c
@@ -30,6 +30,13 @@
 //config:	  date is used to set the system date or display the
 //config:	  current time in the given format.
 //config:
+//config:config FEATURE_DATE_SET
+//config:	bool "Enable system date/time setting (-s)"
+//config:	default y
+//config:	depends on DATE
+//config:	help
+//config:	  Enable system date/time setting option (-s).
+//config:
 //config:config FEATURE_DATE_ISOFMT
 //config:	bool "Enable ISO date format output (-I)"
 //config:	default y
@@ -162,7 +169,9 @@ static void maybe_set_utc(int opt)
 static const char date_longopts[] ALIGN1 =
 		"rfc-822\0"   No_argument       "R"
 		"rfc-2822\0"  No_argument       "R"
+		#if ENABLE_FEATURE_DATE_SET
 		"set\0"       Required_argument "s"
+		#endif
 		"utc\0"       No_argument       "u"
 	/*	"universal\0" No_argument       "u" */
 		"date\0"      Required_argument "d"
@@ -292,10 +301,12 @@ int date_main(int argc UNUSED_PARAM, char **argv)
 
 		maybe_set_utc(opt);
 
+		#if ENABLE_FEATURE_DATE_SET
 		/* if setting time, set it */
 		if ((opt & OPT_SET) && stime(&ts.tv_sec) < 0) {
 			bb_perror_msg("can't set date");
 		}
+		#endif
 	}
 
 	/* Display output */
